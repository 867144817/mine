<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <link rel="stylesheet" href="css/c.css">
    <link rel="stylesheet" href="css/head.css">
    <link rel="stylesheet" href="css/css1.css">
    <link rel="icon" href="">
</head>
<body>
<div class="head">
    <div class="box">
        <div class="box-img">
    <img src="img/logo.png" alt="">
        </div>
        <input type="text">
        <a href="" class="box-btn">发需求</a>
        <span class="">我的</span>
</div>
</div>
<div class="centent">
    <p class="title">抢单中心</p>
    <div class="xian"></div>
     <ul class="qiangdan-u u1">
            <li>
                <a href=""></a>
                <br> 信用贷款</li>
            <li>
                <a href=""></a>
                <br>房屋贷款</li>
            <li>
                <a href=""></a>
                <br>车辆贷款</li>
        </ul>
     <ul class="qiangdan-u u2">
            <li>
                <a href=""></a>
                <br> 企业贷款</li>
            <li>
                <a href=""></a>
                <br>承兑汇率</li>
            <li>
                <a href=""></a>
                <br>更多</li>
        </ul>
    <div class="lunbo">
        <ul>
            <li>3</li>
            <li>1</li>
            <li>2</li>
            <li>3</li>
            <li>1</li>
        </ul>
        <ul>
            <li class="points active"></li>
            <li class="points"></li>
            <li class="points"></li>
        </ul>
    </div>
<div class="find">
    <a href="###">找顾问</a>
    <a href="###">推荐渠道</a>
</div>
    <p class="title">推荐业务</p>
    <div class="xian"></div>
    <ul class="yewu">
        <li>
            <span>有150多亩地贷100万左右</span>
            <p>杨鹏兴 1234567890
                <span class="right">2016-08-16</span></p>

        </li>
        <li>
            <span>有150多亩地贷100万左右</span>
            <p>杨鹏兴 1234567890
                <span class="right">2016-08-16</span></p>

        </li>
        <li>
            <span>有150多亩地贷100万左右</span>
            <p>杨鹏兴 1234567890
                <span class="right">2016-08-16</span></p>

        </li>
        <li>
            <span>有150多亩地贷100万左右</span>
            <p>杨鹏兴 1234567890
                <span class="right">2016-08-16</span></p>

        </li>

    </ul>
    <p class="title">业务渠道</p>
    <div class="xian"></div>
    <ul class="qiangdan-u u3">
        <li>
            <a href=""></a>
            <br> 民生银行</li>
        <li>
            <a href=""></a>
            <br>大道金服</li>
        <li>
            <a href=""></a>
            <br>新时代估价</li>
    </ul>
    <ul class="qiangdan-u u4">
        <li>
            <a href=""></a>
            <br> 洛阳银行</li>
        <li>
            <a href=""></a>
            <br>平安银行</li>
        <li>
            <a href=""></a>
            <br>国信金服</li>
    </ul>
</div>
<script>
    (function(){
        var lunbo = document.querySelector('.lunbo');
        var width = lunbo.offsetWidth;
        console.log(width);
        var ul = document.querySelectorAll('.lunbo ul')[0];
        var points = document.querySelectorAll('.points');

        function addTranslateX(x){

                ul.style.transform = 'translateX('+ x +'px)';
    }
        function addTranstion(){
            ul.style.transition = 'all .5s ease';
    }
        function removeTransition(){
            ul.style.transition = 'none';
        }
        var index = 1;
        var timer = null;
        addTranslateX(-index*width);
        timer = setInterval(function(){
            index++;

            addTransition();
            addTranslateX(-index*width);
            setPoint();
        },1000);

                ul.addEventListener('webkitTransitionEnd',function(e){
                    if(index >=4){
                        index = 1;
                        removeTransition();
                        addTranslateX(-index*width)
                    }else if(index <= 0){
                        index = 3;
                    }

                });
//        timer = setInterval(function(){
////                console.log(index);
//                index ++;
//
//                ul.addEventListener('webkitTransitionEnd',function(e){
//                    if(index >=4){
//                        index = 1;
//                        removeTransition();
//                        addTranslateX(-index*width)
//                    }else if(index <= 0){
//                        index = 3;
//                    }
//
//                });
//                addTranstion();
////                console.log(index);
//                addTranslateX(-index*width);
////            console.log(index);setPoint()
//            setPoint();
//
//
//            },1000);

        var start = 0;
        var end = 0;
        var step = 0;
        ul.addEventListener('touchstart', function(e){
            clearInterval(timer);
            // console.log(e);
            start = e.touches[0].clientX;
            console.log(start);
        });
        ul.addEventListener('touchmove', function(e){
            e.preventDefault();

//             console.log(e);
            end = e.touches[0].clientX;
            step = start -end;

            addTranstion();
            addTranslateX(-index*width-step);
        });
        ul.addEventListener('touchend', function(e){

            if(Math.abs(step) > width*1/3 && end != 0){

                if(step > 0){
                    index++
                }else{
                    index--
                }
            }
            addTranstion();
            addTranslateX(-index * width);
            setPoint();
            clearInterval(timer);
            timer = setInterval(function(){
                index++;
                addTranstion();
                addTranslateX(-index * width);
            },2000);
            start = 0;
            end = 0;
            step = 0;

        },false);
    function setPoint(){
        var pointsIndex = index;
        for(var i=0;i<points.length;i++){
            points[i].classList.remove('active');
//                    console.log(i);
        }
        if(index >=4){
            pointsIndex = 1;
        }else if(index <= 0){
            pointsIndex = 3;
        }
        points[pointsIndex-1].classList.add('active');
    }

    })();

</script>
</body>
</html>